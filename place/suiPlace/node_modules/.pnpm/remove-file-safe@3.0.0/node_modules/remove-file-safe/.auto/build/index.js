import { promises, unlinkSync } from "node:fs";
import { tmpdir } from "node:os";
import isPathInside from "is-path-inside";
function handleError(err) {
    if (err.code === "ENOENT") {
        return true;
    } else if (err.code === "EPERM") {
        return false;
    } else {
        return undefined;
    }
}
function validatePath(path, options) {
    if (options.unsafe) {
        return true;
    } else {
        return isPathInside(path, process.cwd()) || isPathInside(path, tmpdir());
    }
}
export async function removeFile(path, options = {}) {
    if (validatePath(path, options)) {
        return promises.unlink(path).then(()=>{
            return true;
        }).catch((err)=>{
            return handleError(err);
        });
    } else {
        return undefined;
    }
}
export function removeFileSync(path, options = {}) {
    if (validatePath(path, options)) {
        try {
            unlinkSync(path);
            return true;
        } catch (err) {
            return handleError(err);
        }
    } else {
        return undefined;
    }
}
